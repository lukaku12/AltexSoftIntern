(this["webpackJsonpreact-form"]=this["webpackJsonpreact-form"]||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var s=a(2),i=a.n(s),r=a(8),n=a.n(r),l=a(4),u=a(1),c=a(3),o=Object(s.createContext)({apiErrors:null,initialErrors:{},initialValues:{},initialIsTouched:null,rules:[],values:{},errors:{},generalErrors:{},touched:{},isValid:!1,isDirty:!1,isTouched:!1,isSubmitted:!1,resetForm:function(){},submitForm:function(){},handleReset:function(){},handleSubmit:function(){},setFormDirty:function(){},setFieldValue:function(){},setFieldTouched:function(){},setFormSubmission:function(){},getFieldMeta:function(){},getFieldProps:function(){},getFieldHelpers:function(){}}),d=o.Provider,m=function(){return Object(s.useContext)(o)},b=a(5),j="RESET_FORM",y="SUBMIT_FORM",p="SET_FORM_DIRTY",h="SET_FIELD_VALUE",g="SET_FIELD_TOUCHED",v="SET_SUBMITTING_PROCESS",O="SET_FORM_ERROR",f=function(e){var t=e.initialValues,a=e.initialErrors,s=e.initialTouched,i=e.isValidInitial,r=void 0!==i&&i,n=Object(u.a)(Object(u.a)({},Object.keys(t).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},t,!1))}),{})),s||{}),l=Object(u.a)(Object(u.a)({},Object.keys(t).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},t,null))}),{})),a||{}),c=Object.keys(t).some((function(e){return n[e]}));return{errors:l,touched:n,isTouched:c,isDirty:!1,isValid:r,isSubmittingInProcess:!1,generalErrors:[],values:t}},x=function(e,t){switch(t.type){case j:return f(t.payload);case y:var a=Object.keys(e.touched).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(b.a)({},t,!0))}),{});return Object(u.a)(Object(u.a)({},e),{},{isSubmitted:!0,touched:a});case v:return Object(u.a)(Object(u.a)({},e),{},{isSubmittingInProcess:t.payload.isSubmittingInProcess});case p:return Object(u.a)(Object(u.a)({},e),{},{isDirty:t.payload.isDirty});case h:var s=Object(u.a)(Object(u.a)({},e.values),{},Object(b.a)({},t.payload.fieldName,t.payload.fieldValue));return Object(u.a)(Object(u.a)({},e),{},{values:s});case g:var i=Object(u.a)(Object(u.a)({},e.touched),{},Object(b.a)({},t.payload.fieldName,t.payload.fieldTouched));return Object(u.a)(Object(u.a)({},e),{},{touched:i,isTouched:!0});case O:var r=Object(u.a)(Object(u.a)({},e.errors),{},Object(b.a)({},t.payload.fieldName,t.payload.fieldError));return Object(u.a)(Object(u.a)({},e),{},{errors:r});default:return e}},E=function(e){var t=e.onReset,a=e.onSubmit,i=e.apiErrors,r=e.initialErrors,n=e.initialTouched,l=e.isValidInitial,o=e.hasResetOnSubmit,d=e.initialValues,m=void 0===d?{}:d,b=e.isLoading,E=void 0!==b&&b,S=Object(s.useMemo)((function(){return{initialValues:m,initialErrors:r,initialTouched:n,isValidInitial:l}}),[r,n,m,l]),F=Object(s.useReducer)(x,S,f),N=Object(c.a)(F,2),q=N[0],L=N[1],T=Object(s.useMemo)((function(){return Object.keys(q.values)}),[q.values]),P=function(e,t){L({type:O,payload:{fieldName:e,fieldError:t}})},M=function(){},I=function(){},R=function(e,t){return L({type:h,payload:{fieldName:e,fieldValue:t}})},w=function(e,t){L({type:g,payload:{fieldName:e,fieldTouched:t}})},C=function(e){L({type:v,payload:{isSubmittingInProcess:e}})},V=function(e){return L({type:p,payload:{isDirty:e}})},_=function(e){return e},k=function(){return L({type:y})},D=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;return L({type:j,payload:Object(u.a)(Object(u.a)({},S),{},{initialValues:e})})}),[S,m]),A=function(){k(),function(){var e=!1;""===q.values.firstName?(P("firstName","Field is required"),e=!1):""!==q.values.firstName&&q.values.firstName.length<3?(P("firstName","Enter few symbols"),e=!1):""!==q.values.firstName&&q.values.firstName.length>=99?(P("firstName","Max length is 99 symbols"),e=!1):(P("firstName",null),e=!0);""===q.values.lastName?(P("lastName","Field is required"),e=!1):""!==q.values.lastName&&q.values.lastName.length<3?(P("lastName","Enter few symbols"),e=!1):""!==q.values.lastName&&q.values.lastName.length>=99?(P("lastName","Max length is 100 symbols"),e=!1):(P("lastName",null),e=!0);""===q.values.website?(P("website","Field is required"),e=!1):""!==q.values.website&&q.values.website.length<1?(P("website","Enter at least 1 symbol"),e=!1):""!==q.values.website&&q.values.website.length>=20?(P("website","Max length is 20 symbols"),e=!1):(P("website",null),e=!0);""===q.values.age?(P("age","Field is required"),e=!1):""!==q.values.age&&q.values.age<18?(P("age","Too young!"),e=!1):""!==q.values.age&&q.values.age>=99?(P("age","Oppps,sorry!"),e=!1):(P("age",null),e=!0);""===q.values.email?(P("email","Field is required"),e=!1):""===q.values.email||q.values.email.includes("@")?(P("email",null),e=!0):(P("email","Incorrect format"),e=!1);""===q.values.country?(P("country","Field is required"),e=!1):""!==q.values.country&&q.values.country.length<2?(P("country","Enter at least 2 symbol"),e=!1):""!==q.values.country&&q.values.country.length>=30?(P("country","Max length is 30 symbols"),e=!1):(P("country",null),e=!0);""===q.values.city?(P("city","Field is required"),e=!1):""!==q.values.city&&q.values.city.length<2?(P("city","Enter at least 2 symbol"),e=!1):""!==q.values.city&&q.values.city.length>=30?(P("city","Max length is 30 symbols"),e=!1):(P("city",null),e=!0);""===q.values.catchPhrase?(P("catchPhrase","Field is required"),e=!1):""!==q.values.catchPhrase&&q.values.catchPhrase.length<5?(P("catchPhrase","Enter at least 5 symbol"),e=!1):""!==q.values.catchPhrase&&q.values.catchPhrase.length>=99?(P("catchPhrase","Max length is 100 symbols"),e=!1):(P("catchPhrase",null),e=!0);return e}()&&(C(!0),a(q.values))},B=function(e){return function(){P(e,null),w(e,!0),function(e){""===q.values[e]?P(e,"Field is required"):""!==q.values[e]&&q.values[e].toString().length<3&&"age"!==e&&"email"!==e?P(e,"Enter few symbols"):""!==q.values[e]&&q.values[e].toString().length>=99?P(e,"Max length is 100 symbols"):P(e,null)}(e)}},H=function(e){return function(t){R(e,t),V(function(e,t){try{return JSON.stringify(t)===JSON.stringify(e)}catch(a){return!0}}(q.values,m)),P(e,null)}};return Object(s.useEffect)((function(){l&&!q.isSubmitted||T.every((function(e){return!q.errors[e]}))}),[T,l,q.errors,q.isSubmitted,_]),Object(s.useEffect)((function(){o&&!E&&!q.isApiErrors&&q.isSubmittingInProcess&&D(),!E&&q.isApiErrors&&q.isSubmittingInProcess&&C(!1)}),[E,D,o,q.isApiErrors,q.isSubmittingInProcess]),Object(u.a)(Object(u.a)({},q),{},{apiErrors:i,initialErrors:r,initialValues:m,initialTouched:n,getFieldProps:function(e){return{name:e,value:q.values[e],onBlur:B(e),onChange:H(e)}},getFieldMeta:function(e){return{value:q.values[e],errors:q.errors[e],touched:q.touched[e]}},getFieldHelpers:function(e){return{setValue:function(t){return R(e,t)},setError:function(t){return P(e,t)},setTouched:function(t){return w(e,t)}}},setFormDirty:V,setAllErrors:M,setFieldError:P,setFieldValue:R,setIsApiErrors:I,setFieldTouched:w,setFormSubmission:k,setGeneralErrors:function(){},setFormValidationStatus:_,submitForm:A,handleReset:function(e){return e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),null===t||void 0===t||t(),D()},handleSubmit:function(e){return e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),A()},resetForm:D})},S=function(e){var t=m(),a=t.getFieldMeta,s=t.getFieldProps,i=t.getFieldHelpers;return[s(e),a(e),i(e)]},F=a(0),N=["children"],q=function(e){var t=e.children,a=Object(l.a)(e,N),s=E(a),i="function"===typeof t;return Object(F.jsx)(d,{value:s,children:i?t(s):t})},L=["children"],T=function(e){var t=e.children,a=Object(l.a)(e,L),s=m(),i=(s.apiErrors,s.initialValues,s.setAllErrors,s.setIsApiErrors,s.setGeneralErrors,s.handleReset),r=s.handleSubmit;return Object(F.jsx)("form",Object(u.a)(Object(u.a)({action:"#",onSubmit:r,onReset:i},a),{},{children:t}))},P=(a(15),function(e){var t=e.errors,a=e.name,s=void 0===a?"global":a;if(!(null===t||void 0===t?void 0:t.length))return null;var i=[t];return Object(F.jsx)("div",{className:"error_container","data-testid":"".concat(s,"-error-container"),children:i.map((function(e){return Object(F.jsx)("span",{style:{display:"block"},className:"error_message",children:e},Math.random().toString)}))})}),M=function(e){var t=e.name,a=m(),s=a.errors,i=a.touched,r=s[t];return i&&(null===r||void 0===r?void 0:r.length)?Object(F.jsx)(P,{errors:r,name:t}):null},I=["name"],R=function(e){var t=e.name,a=Object(l.a)(e,I),s=S(t),i=Object(c.a)(s,1)[0],r=i.value,n=i.onChange,o=i.onBlur;return Object(F.jsx)("input",Object(u.a)({name:t,value:r,onChange:function(e){return n(e.target.value)},onBlur:o},a))},w=["name","options"],C=function(e){var t=e.name,a=e.options,s=Object(l.a)(e,w),i=S(t),r=Object(c.a)(i,1)[0],n=r.value,o=r.onChange,d=r.onBlur;return Object(F.jsx)("select",Object(u.a)(Object(u.a)({name:t,value:n,onChange:function(e){return o(e.target.value)},onBlur:d},s),{},{children:a.map((function(e){return Object(F.jsx)("option",{value:e.value,children:e.label},e.label)}))}))},V=["name"],_=function(e){var t=e.name,a=Object(l.a)(e,V),s=S(t),i=Object(c.a)(s,1)[0],r=i.value,n=i.onChange,o=i.onBlur;return Object(F.jsx)("input",Object(u.a)(Object(u.a)({},a),{},{type:"checkbox",name:t,checked:r,onBlur:o,onChange:function(e){return n(e.target.checked)}}))},k=function(e){return fetch("".concat("http://localhost:3000/","users/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json;charset=utf-8"}})},D=[{inputName:"firstName",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:3,message:"Enter few symbols"},{type:"maxLength",value:99,message:"Max length is 99 symbols"}],validateOn:"blur"},{inputName:"firstName",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:3,message:"(Submit) Enter few symbols"},{type:"maxLength",value:99,message:"(Submit) Max length is 99 symbols"}],validateOn:"submit"},{inputName:"lastName",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:3,message:"Enter few symbols"},{type:"maxLength",value:99,message:"Max length is 99 symbols"}],validateOn:"blur"},{inputName:"lastName",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:3,message:"(Submit) Enter few symbols"},{type:"maxLength",value:99,message:"(Submit) Max length is 99 symbols"}],validateOn:"submit"},{inputName:"website",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:1,message:"Enter at least 1 symbol"},{type:"maxLength",value:20,message:"Max length is 20 symbols"}],validateOn:"blur"},{inputName:"website",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:1,message:"(Submit) Enter at least 1 symbol"},{type:"maxLength",value:20,message:"(Submit) Max length is 20 symbols"}],validateOn:"submit"},{inputName:"age",rules:[{type:"required",message:"Field is required"},{type:"min",value:18,message:"Too young!"},{type:"max",value:99,message:"Oppps,sorry!"}],validateOn:"blur"},{inputName:"age",rules:[{type:"required",message:"(Submit) Field is required"},{type:"min",value:18,message:"(Submit) Too young!"},{type:"max",value:99,message:"(Submit) Oppps,sorry!"}],validateOn:"submit"},{inputName:"email",rules:[{type:"required",message:"Field is required"},{type:"email",message:"Incorrect format"}],validateOn:"blur"},{inputName:"email",rules:[{type:"required",message:"(Submit) Field is required"},{type:"email",message:"(Submit) Incorrect format"}],validateOn:"submit"},{inputName:"country",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:2,message:"Enter at least 2 symbol"},{type:"maxLength",value:30,message:"Max length is 30 symbols"}],validateOn:"blur"},{inputName:"country",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:2,message:"Enter at least 2 symbol"},{type:"maxLength",value:30,message:"Max length is 30 symbols"}],validateOn:"submit"},{inputName:"city",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:2,message:"Enter at least 2 symbol"},{type:"maxLength",value:30,message:"Max length is 30 symbols"}],validateOn:"blur"},{inputName:"city",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:5,message:"(Submit) Enter at least 5 symbol"},{type:"maxLength",value:100,message:"(Submit) Max length is 100 symbols"}],validateOn:"submit"},{inputName:"catchPhrase",rules:[{type:"required",message:"Field is required"},{type:"minLength",value:5,message:"Enter at least 5 symbol"},{type:"maxLength",value:100,message:"Max length is 100 symbols"}],validateOn:"blur"},{inputName:"catchPhrase",rules:[{type:"required",message:"(Submit) Field is required"},{type:"minLength",value:5,message:"(Submit) Enter at least 5 symbol"},{type:"maxLength",value:100,message:"(Submit) Max length is 100 symbols"}],validateOn:"submit"}],A=a(7),B=a.n(A),H=a(9),U=400,J=function(e,t){var a;switch(t.type){case"FETCH_INIT":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!0,error:null});case"FETCH_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,error:t.payload});case"FETCH_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isLoading:!1,isFirstRequestLoaded:!0,error:null,data:null===(a=t.payload)||void 0===a?void 0:a.data,fullResponse:t.payload});default:return e}},G={generalErrors:[{message:"Please, enter correct values"},{message:"Too many requests!"}],firstName:[{message:"Enter correct first name!"},{message:"Alphanumeric string"}],lastName:[{message:"Enter correct last name!"},{message:"Alphanumeric string"}]},z=function(e){var t,a=Object(s.useState)(null),i=Object(c.a)(a,2),r=i[0],n=i[1],l=function(e){var t=e.fetchHandler,a=e.initialData,i=e.onError,r=e.onSuccess,n=e.isLoadingInitial,l=void 0!==n&&n,u=e.isLazy,o=Object(s.useReducer)(J,{data:a,isLoading:l,error:null,fullResponse:null,isFirstRequestLoaded:!1}),d=Object(c.a)(o,2),m=d[0],b=d[1],j=function(){var e=Object(H.a)(B.a.mark((function e(t){var a,s,n,l,u=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]&&u[1],b({type:"FETCH_INIT",payload:null}),e.prev=2,e.next=5,t;case 5:if(!(null===(s=e.sent)||void 0===s?void 0:s.json)){e.next=12;break}return e.next=9,null===s||void 0===s?void 0:s.json();case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:n=e.t0,l={data:n,ok:s.ok,status:s.status,statusText:s.statusText},a||(null===r||void 0===r||r(l),b({type:"FETCH_SUCCESS",payload:l})),e.next=21;break;case 18:e.prev=18,e.t1=e.catch(2),a||(null===i||void 0===i||i(e.t1),b({type:"FETCH_FAILURE",payload:e.t1}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e=!1;return u||e||j(t(),e),function(){e=!0}}),[]),[m,function(){return j(t.apply(void 0,arguments))}]}({isLazy:!0,fetchHandler:e,onSuccess:function(e){var t=e.status,a=e.ok,s=e.data;a&&n(null),t===U&&n(s)},onError:function(){n(G)}}),u=Object(c.a)(l,2),o=u[0];return{apiValidationErrors:r,onSubmit:u[1],isLoading:o.isLoading,responseStatus:null===(t=o.fullResponse)||void 0===t?void 0:t.status}},W={age:"0",married:!1,sex:"male",email:"",website:"",city:"",country:"",lastName:"",firstName:"",catchPhrase:""},Y=function(e){var t=e.isSubmitPermanentlyEnabled,a=e.initialValues,s=void 0===a?W:a,i=e.submitPromise,r=z(void 0===i?k:i),n=r.onSubmit,l=r.onReset,u=r.isLoading,c=r.apiValidationErrors,o=r.responseStatus;return Object(F.jsx)(q,{isValidInitial:!0,hasResetOnSubmit:!0,onReset:l,onSubmit:n,rules:D,isLoading:u,initialValues:s,apiErrors:c,children:function(e){return Object(F.jsxs)(T,{children:[o&&Object(F.jsx)("span",{"data-testid":"response-status",style:{visibility:"hidden"},children:o}),!e.isValid&&Object(F.jsx)(P,{errors:e.generalErrors}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"firstName",type:"text",name:"firstName",placeholder:"First Name"}),Object(F.jsx)(M,{name:"firstName"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"lastName",type:"text",name:"lastName",placeholder:"Last Name"}),Object(F.jsx)(M,{name:"lastName"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"website",type:"text",name:"website",placeholder:"Website"}),Object(F.jsx)(M,{name:"website"})]}),Object(F.jsx)("br",{}),Object(F.jsx)("div",{children:Object(F.jsx)(C,{name:"sex","data-testid":"sex",placeholder:"Sex",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]})}),Object(F.jsx)("br",{}),Object(F.jsx)("div",{children:Object(F.jsxs)("label",{children:[Object(F.jsx)(_,{"data-testid":"married",id:"married",name:"married"}),"Married"]})}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"age",type:"number",min:0,name:"age",placeholder:"Age"}),Object(F.jsx)(M,{name:"age"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"email",type:"text",name:"email",placeholder:"Email"}),Object(F.jsx)(M,{name:"email"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"country",type:"text",name:"country",placeholder:"Country"}),Object(F.jsx)(M,{name:"country"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"city",type:"text",name:"city",placeholder:"City"}),Object(F.jsx)(M,{name:"city"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)(R,{"data-testid":"catchPhrase",type:"text",name:"catchPhrase",placeholder:"Catch Phrase"}),Object(F.jsx)(M,{name:"catchPhrase"})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("div",{children:[Object(F.jsx)("button",{type:"submit","data-testid":"submitBtn",disabled:!t&&(!e.isValid||u),children:"Submit"}),Object(F.jsx)("button",{"data-testid":"resetBtn",type:"reset",children:"Reset"})]})]})}})},K=(a(17),function(){return Object(F.jsx)(Y,{})});n.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(K,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.35d121a6.chunk.js.map